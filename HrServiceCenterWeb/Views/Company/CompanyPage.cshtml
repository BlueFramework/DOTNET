
@{
    ViewBag.Title = "公司档案信息";
}
<script src="~/JS/company.CompanyPageOpt.js"></script>
<script type="text/javascript">
    var dataId = @ViewBag.CompanyId;
</script>
<div class="container container-layout">
    <div class="page-header">
        <h3>基础信息.<small>&nbsp;<a href="~/Company/CompanyList">公司信息列表</a></small>.<small>&nbsp;公司信息</small></h3>
    </div>

    <!-- 档案信息 -->
    <div style="margin:20px 0;"></div>
    <div>
        <form class="form-horizontal" id="formCompany">
            <div class="form-group">
                <label class="col-sm-2 control-label">单位名称</label>
                <div class="col-sm-10">
                    <input class="easyui-textbox" form-field-name="Name" form-control-type="textbox" data-options="prompt:'输入单位的名称.',required:true,validType:'length[3,100]'" style="height:30px;width:100%" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">组织结构编码</label>
                <div class="col-sm-10">
                    <input class="easyui-textbox" form-field-name="code" form-control-type="textbox" data-options="prompt:'输入组织结构编码.',validType:'length[3,50]'" style="height:30px;width:100%" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">企业法人</label>
                <div class="col-sm-10">
                    <input class="easyui-textbox" form-field-name="Representative" form-control-type="textbox" data-options="prompt:'输入法人姓名.',validType:'length[3,50]'" style="height:30px;width:100%" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">备注</label>
                <div class="col-sm-10">
                    <input class="easyui-textbox" form-field-name="Remark" form-control-type="textbox" data-options="prompt:'输入备注.',validType:'length[3,250]'" style="height:30px;width:100%" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">账户余额</label>
                <div class="col-sm-2">
                    <input class="easyui-textbox" form-field-name="AccountBalance" form-control-type="textbox" data-options="disabled:true" style="height:30px;width:100px" />
                </div>
                <div class="col-sm-2">
                    <button class="btn btn-success" onclick="opt.recharge();return false;" name="onOldData">充值</button>
                </div>
            </div>
            <div class="form-group" id="divRecharge" style="display:none;">
                <label class="col-sm-2 control-label">请输入金额</label>
                <div class="col-sm-2">
                    <input id="nbRecharge" class="easyui-numberbox" value="0.00" data-options="precision:2,groupSeparator:','" style="height:30px;width:100px" />
                </div>
                <div class="col-sm-2">
                    <button id="btnSaveRecharge" class="btn btn-success" onclick="opt.saveRecharge();return false;">确定</button>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-1 col-sm-10">
                    <button class="btn btn-primary" onclick="opt.save();return false;" style="width:110px;">保存公司信息</button>
                    <button class="btn btn-info" onclick="opt.addPosition();return false;" style="width:110px;" name="onOldData">+增加岗位</button>
                    <button class="btn btn-info" onclick="opt.removePosition();return false;" style="width:110px;" name="onOldData">+删除岗位</button>
                </div>
            </div>
        </form>
    </div>
    <div id="dgContainer" class="row">
        <div class="col-sm-offset-1 col-sm-10">
            <table id="dg" class="easyui-datagrid" title="人员编制设置" style="width:100%;height:400px"
                   data-options="idField:'PositionId',
			        singleSelect:true,collapsible:false,rownumbers:true,striped:true,onDblClickRow:function(rowIndex,rowData){opt.editPosition(rowData)}">
                <thead>
                    <tr>
                        <th data-options="field:'PositionId',width:50">ID</th>
                        <th data-options="field:'PositionName',width:100">岗位类型</th>
                        <th data-options="field:'BaseSalary',width:80">基本工资</th>
                        <th data-options="field:'AssistSalary',width:80">辅助工资</th>
                        <th data-options="field:'ConsolationFee',width:80">慰问费</th>
                        <th data-options="field:'Insurance',width:80">社保/年</th>
                        <th data-options="field:'AccumulationFund',width:80">公积金/年</th>
                        <th data-options="field:'PlanCount',width:80">编制人数</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<!-- 岗位编辑窗 -->
<div id="dlg" class="easyui-dialog" title="岗位设置窗" style="width:600px;height:400px;padding:20px 0px 0px 50px;" data-options="
                closed:true,modal:true,
				buttons: [{
					text:'确定',
					iconCls:'icon-ok',
					handler:function(){
						opt.savePosition();
					}
				},{
					text:'取消',
					handler:function(){
						$('#dlg').dialog('close');
					}
				}]">
    <form id="frmPosition" class="form-horizontal" style="overflow:hidden;">
        <div class="form-group">
            <div class="col-sm-2">岗位名称</div>
            <div class="col-sm-4">
                <input class="easyui-combobox" id="cmbPosition" style="width:100%;" form-field-name="PositionId" form-control-type="combobox"
                       data-options="
                url:'../BaseCode/GetPositions',
                method:'get',
                editable:false,
                valueField:'PositionId',
                textField:'PositionName',
                onSelect: function(rec){
                    opt.selectPosition(rec);
                },
                panelHeight:'auto'" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">编制数量</div>
            <div class="col-sm-4"><input type="text" id="txtPositionCount" class="easyui-numberbox" value="0" data-options="min:0,precision:0"></div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">基本工资</div>
            <div class="col-sm-4"><input type="text" style="width:100%;" disabled="true" form-field-name="BaseSalary" /></div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">辅助工资</div>
            <div class="col-sm-4"><input type="text" style="width:100%;" disabled="true" form-field-name="AssistSalary" /></div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">慰问费</div>
            <div class="col-sm-4"><input type="text" style="width:100%;" disabled="true" form-field-name="ConsolationFee" /></div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">社保/年</div>
            <div class="col-sm-4"><input type="text" style="width:100%;" disabled="true" form-field-name="Insurance" /></div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">公积金/年</div>
            <div class="col-sm-4"><input type="text" style="width:100%;" disabled="true" form-field-name="AccumulationFund" /></div>
        </div>
        <div class="form-group">
            <div class="col-sm-2">岗位描述</div>
            <div class="col-sm-4"><input type="text" style="width:100%;" disabled="true" form-field-name="PositionDesc" /></div>
        </div>
    </form>
</div>


